<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TextBtn Example - Tiny UI Components</title>
    <style>
    * {
      padding: 0;
      margin: 0;
    }
    html,body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      width: 100%;
      height: 100%;
      -ms-touch-action: none;
      touch-action: none;
    }
    canvas {
      -ms-touch-action: none;
      touch-action: none;
      touch-action-delay: none;
      -webkit-tap-highlight-color: rgba(0,0,0,0);
      -moz-tap-highlight-color: rgba(0,0,0,0);
      user-select: none;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      outline: none;
      border: none;
      width: 100%;
      height: 100%;
    }
    #info {
      position: fixed;
      bottom: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 10px;
      font-family: monospace;
      font-size: 12px;
      border-radius: 4px;
      pointer-events: none;
      z-index: 1000;
    }
    </style>
  </head>
  <body>
    <div id="info">
      <div>TextBtn Demo (DPR: <span id="dpr">1</span>x)</div>
      <div>Click buttons to test</div>
    </div>
    <canvas id="game"></canvas>
    <script src="/core/dist/tiny-ui-core.js"></script>
    <script src="/components/dist/tiny-ui-components.js"></script>
    <script>
    const canvas = document.getElementById('game');
    const tinyUI = new TinyUI(canvas);
    const { TextBtn } = TinyUIComponents;
    const { adjustTo } = TinyUIComponents.utils;

    // DPR scaling
    const dpr = window.devicePixelRatio || 1;
    document.getElementById('dpr').textContent = dpr.toFixed(1);
    const scale = (val) => val * Math.min(dpr, 2);

    // Sizes
    const fontSize = {
      title: scale(36),
      label: scale(20)
    };
    
    const btnSize = {
      standard: { w: scale(180), h: scale(60) },
      custom: { w: scale(150), h: scale(50) },
      small: { w: scale(120), h: scale(45) },
      normal: { w: scale(160), h: scale(60) },
      large: { w: scale(200), h: scale(80) }
    };

    // 背景
    const bg = tinyUI.createGraphics();
    bg.drawRect(0, 0, tinyUI.stageWidth, tinyUI.stageHeight, '#f8fafc');
    tinyUI.root.addChild(bg);
    adjustTo(tinyUI.root, true)(bg, { h: 'left', v: 'top' });

    // ========== 标题 ==========
    const title = tinyUI.createText('TextBtn Component Demo');
    title.color = '#333333';
    title.fontSize = fontSize.title;
    title.updateTexture();
    tinyUI.root.addChild(title);
    adjustTo(tinyUI.root, true)(title, { h: 'center', v: 'top' }, { y: scale(50) });

    // ========== 示例1: 普通按钮 ==========
    const label1 = tinyUI.createText('1. Normal Button');
    label1.color = '#666666';
    label1.fontSize = fontSize.label;
    label1.updateTexture();
    tinyUI.root.addChild(label1);
    adjustTo(title, false)(label1, { h: 'center', v: 'bottom' }, { y: fontSize.label + scale(30) });

    const btn1 = TextBtn({
      app: tinyUI,
      text: 'Click Me',
      width: btnSize.standard.w,
      height: btnSize.standard.h,
      fontSize: fontSize.label,
      onClick: () => {
        console.log('Button 1 clicked!');
        alert('Button 1 clicked!');
      }
    });
    tinyUI.root.addChild(btn1);
    adjustTo(label1, false)(btn1, { h: 'center', v: 'bottom' }, { y: btnSize.standard.h + scale(15) });

    // ========== 示例2: 自定义颜色 ==========
    const label2 = tinyUI.createText('2. Custom Colors');
    label2.color = '#666666';
    label2.fontSize = fontSize.label;
    label2.updateTexture();
    tinyUI.root.addChild(label2);
    adjustTo(btn1, false)(label2, { h: 'center', v: 'bottom' }, { y: fontSize.label + scale(30) });

    const btn2 = TextBtn({
      app: tinyUI,
      text: 'Danger',
      bgColor: '#ef4444',
      textColor: '#ffffff',
      width: btnSize.custom.w,
      height: btnSize.custom.h,
      fontSize: fontSize.label,
      onClick: () => {
        console.log('Danger button clicked!');
      }
    });
    tinyUI.root.addChild(btn2);
    adjustTo(label2, false)(btn2, { h: 'center', v: 'bottom' }, { x: -scale(100), y: btnSize.custom.h + scale(15) });

    const btn3 = TextBtn({
      app: tinyUI,
      text: 'Success',
      bgColor: '#10b981',
      textColor: '#ffffff',
      width: btnSize.custom.w,
      height: btnSize.custom.h,
      fontSize: fontSize.label,
      onClick: () => {
        console.log('Success button clicked!');
      }
    });
    tinyUI.root.addChild(btn3);
    adjustTo(label2, false)(btn3, { h: 'center', v: 'bottom' }, { x: scale(100), y: btnSize.custom.h + scale(15) });

    // ========== 示例3: Responsive 模式 ==========
    const label3 = tinyUI.createText('3. Responsive Mode (auto width)');
    label3.color = '#666666';
    label3.fontSize = fontSize.label;
    label3.updateTexture();
    tinyUI.root.addChild(label3);
    // label3 位于 btn2 和 btn3 的下方，使用 label2 作为基准（label2 是居中的）
    adjustTo(label2, false)(label3, { h: 'center', v: 'bottom' }, { y: fontSize.label + scale(80) });

    const btn4 = TextBtn({
      app: tinyUI,
      text: 'Short',
      responsive: true,
      bgColor: '#8b5cf6',
      fontSize: fontSize.label,
      onClick: () => {
        console.log('Responsive button clicked!');
      }
    });
    tinyUI.root.addChild(btn4);
    adjustTo(label3, false)(btn4, { h: 'center', v: 'bottom' }, { x: -scale(150), y: btnSize.custom.h + scale(15) });

    const btn5 = TextBtn({
      app: tinyUI,
      text: 'Long Text Button',
      responsive: true,
      bgColor: '#8b5cf6',
      fontSize: fontSize.label,
      onClick: () => {
        console.log('Long responsive button clicked!');
      }
    });
    tinyUI.root.addChild(btn5);
    adjustTo(label3, false)(btn5, { h: 'center', v: 'bottom' }, { x: scale(150), y: btnSize.custom.h + scale(15) });

    // ========== 示例4: 不同字号 ==========
    const label4 = tinyUI.createText('4. Different Font Sizes');
    label4.color = '#666666';
    label4.fontSize = fontSize.label;
    label4.updateTexture();
    tinyUI.root.addChild(label4);
    // label4 基于 label3（居中的 label）定位
    adjustTo(label3, false)(label4, { h: 'center', v: 'bottom' }, { y: fontSize.label + scale(80) });

    const btn6 = TextBtn({
      app: tinyUI,
      text: 'Small',
      fontSize: scale(18),
      width: btnSize.small.w,
      height: btnSize.small.h,
      bgColor: '#f59e0b',
      onClick: () => console.log('Small clicked')
    });
    tinyUI.root.addChild(btn6);
    adjustTo(label4, false)(btn6, { h: 'center', v: 'bottom' }, { x: -scale(220), y: btnSize.small.h + scale(15) });

    const btn7 = TextBtn({
      app: tinyUI,
      text: 'Normal',
      fontSize: scale(28),
      width: btnSize.normal.w,
      height: btnSize.normal.h,
      bgColor: '#f59e0b',
      onClick: () => console.log('Normal clicked')
    });
    tinyUI.root.addChild(btn7);
    adjustTo(label4, false)(btn7, { h: 'center', v: 'bottom' }, { y: btnSize.normal.h + scale(15) });

    const btn8 = TextBtn({
      app: tinyUI,
      text: 'Large',
      fontSize: scale(40),
      width: btnSize.large.w,
      height: btnSize.large.h,
      bgColor: '#f59e0b',
      onClick: () => console.log('Large clicked')
    });
    tinyUI.root.addChild(btn8);
    adjustTo(label4, false)(btn8, { h: 'center', v: 'bottom' }, { x: scale(220), y: btnSize.large.h + scale(15) });

    // ========== 底部说明 ==========
    const hint = tinyUI.createText('Try clicking different buttons to see console logs');
    hint.color = '#999999';
    hint.fontSize = scale(16);
    hint.updateTexture();
    tinyUI.root.addChild(hint);
    // hint 基于 label4（居中的 label）定位
    adjustTo(label4, false)(hint, { h: 'center', v: 'bottom' }, { y: btnSize.normal.h + scale(50) });

    requestAnimationFrame(() => tinyUI.render());
    </script>
  </body>
</html>
