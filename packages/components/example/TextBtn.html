<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TextBtn Example - Tiny UI Components</title>
    <style>
    * {
      padding: 0;
      margin: 0;
    }
    html,body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      width: 100%;
      height: 100%;
      -ms-touch-action: none;
      touch-action: none;
    }
    canvas {
      -ms-touch-action: none;
      touch-action: none;
      touch-action-delay: none;
      -webkit-tap-highlight-color: rgba(0,0,0,0);
      -moz-tap-highlight-color: rgba(0,0,0,0);
      user-select: none;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      outline: none;
      border: none;
      width: 100%;
      height: 100%;
    }
    #info {
      position: fixed;
      bottom: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 10px;
      font-family: monospace;
      font-size: 12px;
      border-radius: 4px;
      pointer-events: none;
      z-index: 1000;
    }
    </style>
  </head>
  <body>
    <div id="info">
      <div>TextBtn Demo (DPR: <span id="dpr">1</span>x)</div>
      <div>Click buttons to test</div>
    </div>
    <canvas id="game"></canvas>
    <script src="/core/dist/tiny-ui-core.js"></script>
    <script src="/components/dist/tiny-ui-components.js"></script>
    <script>
    const canvas = document.getElementById('game');
    const tinyUI = new TinyUI(canvas);
    const { TextBtn } = TinyUIComponents;
    const { adjustTo } = TinyUIComponents.utils;

    // DPR scaling
    const dpr = window.devicePixelRatio || 1;
    document.getElementById('dpr').textContent = dpr.toFixed(1);
    const scale = (val) => val * Math.min(dpr, 2);

    // Sizes
    const fontSize = {
      title: scale(36),
      label: scale(18)
    };
    
    const btnSize = {
      standard: { w: scale(160), h: scale(50) },
      small: { w: scale(100), h: scale(40) },
      normal: { w: scale(140), h: scale(50) },
      large: { w: scale(180), h: scale(60) }
    };

    // 背景
    const bg = tinyUI.createGraphics();
    bg.drawRect(0, 0, tinyUI.stageWidth, tinyUI.stageHeight, '#f8fafc');
    tinyUI.root.addChild(bg);
    adjustTo(tinyUI.root, true)(bg, { h: 'left', v: 'top' });

    // ========== 标题 ==========
    const title = tinyUI.createText('TextBtn - 垂直居中文本测试');
    title.color = '#333333';
    title.fontSize = fontSize.title;
    title.updateTexture();
    tinyUI.root.addChild(title);
    adjustTo(tinyUI.root, true)(title, { h: 'center', v: 'top' }, { y: scale(30) });

    // ========== 第1行: 纯英文 ==========
    const label1 = tinyUI.createText('1. English Only');
    label1.color = '#666666';
    label1.fontSize = fontSize.label;
    label1.updateTexture();
    tinyUI.root.addChild(label1);
    adjustTo(title, false)(label1, { h: 'center', v: 'bottom' }, { y: fontSize.label + scale(20) });

    const btn1a = TextBtn({
      app: tinyUI,
      text: 'Start Game',
      width: btnSize.standard.w,
      height: btnSize.standard.h,
      fontSize: scale(20),
      onClick: () => console.log('Start clicked')
    });
    tinyUI.root.addChild(btn1a);
    adjustTo(label1, false)(btn1a, { h: 'center', v: 'bottom' }, { x: -scale(180), y: btnSize.standard.h + scale(10) });

    const btn1b = TextBtn({
      app: tinyUI,
      text: 'Settings',
      width: btnSize.standard.w,
      height: btnSize.standard.h,
      fontSize: scale(20),
      bgColor: '#10b981',
      onClick: () => console.log('Settings clicked')
    });
    tinyUI.root.addChild(btn1b);
    adjustTo(label1, false)(btn1b, { h: 'center', v: 'bottom' }, { y: btnSize.standard.h + scale(10) });

    const btn1c = TextBtn({
      app: tinyUI,
      text: 'Quit App',
      width: btnSize.standard.w,
      height: btnSize.standard.h,
      fontSize: scale(20),
      bgColor: '#ef4444',
      onClick: () => console.log('Quit clicked')
    });
    tinyUI.root.addChild(btn1c);
    adjustTo(label1, false)(btn1c, { h: 'center', v: 'bottom' }, { x: scale(180), y: btnSize.standard.h + scale(10) });

    // ========== 第2行: 纯中文 ==========
    const label2 = tinyUI.createText('2. 纯中文');
    label2.color = '#666666';
    label2.fontSize = fontSize.label;
    label2.updateTexture();
    tinyUI.root.addChild(label2);
    adjustTo(btn1b, false)(label2, { h: 'center', v: 'bottom' }, { y: fontSize.label + scale(40) });

    const btn2a = TextBtn({
      app: tinyUI,
      text: '开始游戏',
      width: btnSize.standard.w,
      height: btnSize.standard.h,
      fontSize: scale(20),
      onClick: () => console.log('开始游戏 clicked')
    });
    tinyUI.root.addChild(btn2a);
    adjustTo(label2, false)(btn2a, { h: 'center', v: 'bottom' }, { x: -scale(180), y: btnSize.standard.h + scale(10) });

    const btn2b = TextBtn({
      app: tinyUI,
      text: '设置选项',
      width: btnSize.standard.w,
      height: btnSize.standard.h,
      fontSize: scale(20),
      bgColor: '#10b981',
      onClick: () => console.log('设置选项 clicked')
    });
    tinyUI.root.addChild(btn2b);
    adjustTo(label2, false)(btn2b, { h: 'center', v: 'bottom' }, { y: btnSize.standard.h + scale(10) });

    const btn2c = TextBtn({
      app: tinyUI,
      text: '退出应用',
      width: btnSize.standard.w,
      height: btnSize.standard.h,
      fontSize: scale(20),
      bgColor: '#ef4444',
      onClick: () => console.log('退出应用 clicked')
    });
    tinyUI.root.addChild(btn2c);
    adjustTo(label2, false)(btn2c, { h: 'center', v: 'bottom' }, { x: scale(180), y: btnSize.standard.h + scale(10) });

    // ========== 第3行: 中英混排 ==========
    const label3 = tinyUI.createText('3. 中英混排 Mixed');
    label3.color = '#666666';
    label3.fontSize = fontSize.label;
    label3.updateTexture();
    tinyUI.root.addChild(label3);
    adjustTo(btn2b, false)(label3, { h: 'center', v: 'bottom' }, { y: fontSize.label + scale(40) });

    const btn3a = TextBtn({
      app: tinyUI,
      text: 'Play 开始',
      width: btnSize.standard.w,
      height: btnSize.standard.h,
      fontSize: scale(20),
      onClick: () => console.log('Play 开始 clicked')
    });
    tinyUI.root.addChild(btn3a);
    adjustTo(label3, false)(btn3a, { h: 'center', v: 'bottom' }, { x: -scale(180), y: btnSize.standard.h + scale(10) });

    const btn3b = TextBtn({
      app: tinyUI,
      text: 'VIP会员',
      width: btnSize.standard.w,
      height: btnSize.standard.h,
      fontSize: scale(20),
      bgColor: '#8b5cf6',
      onClick: () => console.log('VIP会员 clicked')
    });
    tinyUI.root.addChild(btn3b);
    adjustTo(label3, false)(btn3b, { h: 'center', v: 'bottom' }, { y: btnSize.standard.h + scale(10) });

    const btn3c = TextBtn({
      app: tinyUI,
      text: '领取 Reward',
      width: btnSize.standard.w,
      height: btnSize.standard.h,
      fontSize: scale(18),
      bgColor: '#f59e0b',
      onClick: () => console.log('领取 Reward clicked')
    });
    tinyUI.root.addChild(btn3c);
    adjustTo(label3, false)(btn3c, { h: 'center', v: 'bottom' }, { x: scale(180), y: btnSize.standard.h + scale(10) });

    // ========== 第4行: 不同字号对比 ==========
    const label4 = tinyUI.createText('4. 字号对比 Font Sizes');
    label4.color = '#666666';
    label4.fontSize = fontSize.label;
    label4.updateTexture();
    tinyUI.root.addChild(label4);
    adjustTo(btn3b, false)(label4, { h: 'center', v: 'bottom' }, { y: fontSize.label + scale(40) });

    const btn4a = TextBtn({
      app: tinyUI,
      text: '小字',
      fontSize: scale(16),
      width: btnSize.small.w,
      height: btnSize.small.h,
      bgColor: '#06b6d4',
      onClick: () => console.log('小字 clicked')
    });
    tinyUI.root.addChild(btn4a);
    adjustTo(label4, false)(btn4a, { h: 'center', v: 'bottom' }, { x: -scale(200), y: btnSize.small.h + scale(10) });

    const btn4b = TextBtn({
      app: tinyUI,
      text: '中字 Text',
      fontSize: scale(22),
      width: btnSize.normal.w,
      height: btnSize.normal.h,
      bgColor: '#06b6d4',
      onClick: () => console.log('中字 clicked')
    });
    tinyUI.root.addChild(btn4b);
    adjustTo(label4, false)(btn4b, { h: 'center', v: 'bottom' }, { y: btnSize.normal.h + scale(10) });

    const btn4c = TextBtn({
      app: tinyUI,
      text: '大字 BIG',
      fontSize: scale(28),
      width: btnSize.large.w,
      height: btnSize.large.h,
      bgColor: '#06b6d4',
      onClick: () => console.log('大字 clicked')
    });
    tinyUI.root.addChild(btn4c);
    adjustTo(label4, false)(btn4c, { h: 'center', v: 'bottom' }, { x: scale(200), y: btnSize.large.h + scale(10) });

    // ========== 第5行: 特殊字符测试 ==========
    const label5 = tinyUI.createText('5. 特殊字符 Special Chars');
    label5.color = '#666666';
    label5.fontSize = fontSize.label;
    label5.updateTexture();
    tinyUI.root.addChild(label5);
    adjustTo(btn4b, false)(label5, { h: 'center', v: 'bottom' }, { y: fontSize.label + scale(40) });

    const btn5a = TextBtn({
      app: tinyUI,
      text: 'gyqp 下单',
      width: btnSize.standard.w,
      height: btnSize.standard.h,
      fontSize: scale(18),
      bgColor: '#ec4899',
      onClick: () => console.log('gyqp clicked')
    });
    tinyUI.root.addChild(btn5a);
    adjustTo(label5, false)(btn5a, { h: 'center', v: 'bottom' }, { x: -scale(180), y: btnSize.standard.h + scale(10) });

    const btn5b = TextBtn({
      app: tinyUI,
      text: 'Level UP!',
      width: btnSize.standard.w,
      height: btnSize.standard.h,
      fontSize: scale(20),
      bgColor: '#ec4899',
      onClick: () => console.log('Level UP clicked')
    });
    tinyUI.root.addChild(btn5b);
    adjustTo(label5, false)(btn5b, { h: 'center', v: 'bottom' }, { y: btnSize.standard.h + scale(10) });

    const btn5c = TextBtn({
      app: tinyUI,
      text: '100%领取',
      width: btnSize.standard.w,
      height: btnSize.standard.h,
      fontSize: scale(18),
      bgColor: '#ec4899',
      onClick: () => console.log('100%领取 clicked')
    });
    tinyUI.root.addChild(btn5c);
    adjustTo(label5, false)(btn5c, { h: 'center', v: 'bottom' }, { x: scale(180), y: btnSize.standard.h + scale(10) });

    // ========== 第6行: Responsive 自适应宽度 ==========
    const label6 = tinyUI.createText('6. 自适应宽度 Responsive');
    label6.color = '#666666';
    label6.fontSize = fontSize.label;
    label6.updateTexture();
    tinyUI.root.addChild(label6);
    adjustTo(btn5b, false)(label6, { h: 'center', v: 'bottom' }, { y: fontSize.label + scale(40) });

    const btn6a = TextBtn({
      app: tinyUI,
      text: 'OK',
      responsive: true,
      bgColor: '#6366f1',
      fontSize: scale(18),
      onClick: () => console.log('OK clicked')
    });
    tinyUI.root.addChild(btn6a);
    adjustTo(label6, false)(btn6a, { h: 'center', v: 'bottom' }, { x: -scale(150), y: scale(50) + scale(10) });

    const btn6b = TextBtn({
      app: tinyUI,
      text: '确认提交',
      responsive: true,
      bgColor: '#6366f1',
      fontSize: scale(18),
      onClick: () => console.log('确认提交 clicked')
    });
    tinyUI.root.addChild(btn6b);
    adjustTo(label6, false)(btn6b, { h: 'center', v: 'bottom' }, { y: scale(50) + scale(10) });

    const btn6c = TextBtn({
      app: tinyUI,
      text: 'Cancel 取消',
      responsive: true,
      bgColor: '#6366f1',
      fontSize: scale(18),
      onClick: () => console.log('Cancel 取消 clicked')
    });
    tinyUI.root.addChild(btn6c);
    adjustTo(label6, false)(btn6c, { h: 'center', v: 'bottom' }, { x: scale(150), y: scale(50) + scale(10) });

    // ========== 底部说明 ==========
    const hint = tinyUI.createText('检查所有按钮文本是否垂直居中对齐 | Check vertical alignment');
    hint.color = '#999999';
    hint.fontSize = scale(14);
    hint.updateTexture();
    tinyUI.root.addChild(hint);
    adjustTo(btn6b, false)(hint, { h: 'center', v: 'bottom' }, { y: scale(80) });

    requestAnimationFrame(() => tinyUI.render());
    </script>
  </body>
</html>
